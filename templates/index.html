{% extends 'base.html' %}
{% load static %}
{% block head %}

{% endblock head %}


{% block body %}
<!--**********************************
            Content body start
        ***********************************-->
        <div class="content-body">

            <div class="container-fluid ">
                <div class="row">
                    {% if messages %}
                        {% for message in messages %}
                        <div class="col-12 mb-5">
                            <div class="alert alert-success alert-dismissible fade show" style="margin-bottom:-20px;">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span>
                            </button>{{message}}</div>
                        </div>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="row carousel-row">
                    <div class="owl-carousel owl-theme col-12" id="owl-carousel">
                      <div class="item">
                        <div class="card">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-9">
                                        <p class="text-sm mb-1 text-capitalize">Jumlah PMKS</p>
                                        <h4 class="text-black font-weight-bold">{{count_pmks}}</h4>
                                    </div>
                                    <div class="col-3">
                                    <i class="display-7 material-icons float-right blue-logo">escalator_warning</i>
                                    </div>
                                </div>
                            </div>
                        </div>
                      </div>
                      <div class="item">
                        <div class="card">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-9">
                                        <p class="text-sm mb-1 text-capitalize">Bansos Disabilitas</p>
                                        <h4 class="text-black font-weight-bold">{{count_disabilitas_diterima}}<span class="ml-1" style="font-size:12px;color:darkred;">(ditolak)</span></h4>
                                    </div>
                                    <div class="col-3">
                                    <i class="display-7 material-icons float-right blue-logo">accessible</i>
                                    </div>
                                </div>
                            </div>
                        </div>
                      </div>
                      <div class="item">
                        <div class="card">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-9">
                                        <p class="text-sm mb-1 text-capitalize">Bansos Disabilitas</p>
                                        <h4 class="text-black font-weight-bold">{{count_disabilitas_diterima}}<span class="ml-1" style="font-size:12px;color:darkgreen;">(diterima)</span></h4>
                                    </div>
                                    <div class="col-3">
                                    <i class="display-7 material-icons float-right blue-logo">accessible</i>
                                    </div>
                                </div>
                            </div>
                        </div>
                      </div>
                      <div class="item">
                        <div class="card">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-9">
                                        <p class="text-sm mb-1 text-capitalize">Bansos Lansia</p>
                                        <h4 class="text-black font-weight-bold">{{count_lansia_ditolak}}<span class="ml-1" style="font-size:12px;color:darkred;">(ditolak)</span></h4>
                                    </div>
                                    <div class="col-3">
                                    <i class="display-7 material-icons float-right blue-logo">elderly</i>
                                    </div>
                                </div>
                            </div>
                        </div>
                      </div>
                      <div class="item">
                        <div class="card">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-9">
                                        <p class="text-sm mb-1 text-capitalize">Bansos Lansia</p>
                                        <h4 class="text-black font-weight-bold">{{count_lansia_diterima}}<span class="ml-1" style="font-size:12px;color:darkgreen;">(diterima)</span></h4>
                                    </div>
                                    <div class="col-3">
                                    <i class="display-7 material-icons float-right blue-logo">elderly</i>
                                    </div>
                                </div>
                            </div>
                        </div>
                      </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-xl-3 col-lg-6 col-sm-6 col-xxl-6">
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title text-blue">Grafik Penerima Bansos tiap Kecamatan</h4>
                                <canvas id="chart" width="500" height="400"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="col-xl-3 col-lg-6 col-sm-6 col-xxl-6">
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title text-blue">Jumlah PMKS tiap Kecamatan
                                    {% comment %} <span class="input-group-prepend pull-right">
                                    <button class="btn btn-outline-dark btn-sm badge-pill dropdown-toggle" type="button" data-toggle="dropdown">Tahun 2021</button>
                                        <div class="dropdown-menu">
                                            <a class="dropdown-item btn-sm" href="#">2021</a> 
                                            <a class="dropdown-item btn-sm" href="#">2022</a> 
                                            <a class="dropdown-item btn-sm" href="#">2023</a>
                                        </div>
                                    </span> {% endcomment %}
                                </h4>
                                <div class="media-body pt-3 pb-3">
                                    <div class="media-body">
                                        <h5>Kecamatan<span class="pull-right">Jumlah</span></h5>
                                    </div>
                                </div>
                                <div class="media">
                                    <div class="media-body">
                                        {% for kec in data_kecamatan  %}
                                        <h6>{{kec.kec}}<span class="pull-right">{{kec.count}}</span></h6>
                                        {% endfor %}
                                        </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- #/ container -->
    </div>
    <!--**********************************
            Content body end
        ***********************************-->        
{% endblock body %}

{% block footer %}
<script>
    $(document).ready(function () {
      var owl = $("#owl-carousel");
      owl.owlCarousel({
        margin: 25,
        loop: false,
        autoplay: false,
        nav: true,
        autoplayTimeout: false,
        dots:false,
        responsive: {
          0: {
            items: 1,
          },
          600: {
            items: 1,
          },
          1000: {
            items: 4,
          },
        },
      });
    });
  </script>
<script>
    let ctx = document.getElementById("chart").getContext("2d");

let chart = new Chart(ctx, {
  type: "bar",
  data: {
     labels: [{%for tahun in tahun%}'{{tahun}}',{%endfor%}],
     datasets: [
        {
          label: "PMKS",
          backgroundColor: "#79AEC8",
          borderColor: "#417690",
          data: [{%for pmks in pmks%}'{{pmks}}',{%endfor%}]
        },
        {
            label: "Penerima",
            backgroundColor: "blue",
            data: [{%for penerima in penerima%}'{{penerima}}',{%endfor%}]
        },
     ]
  },
  options: {
     scales: {
        yAxes: [{
          ticks: {
            beginAtZero: true,
            min: 0
          }    
        }]
      }
  }
});
</script>
{% endblock footer %}